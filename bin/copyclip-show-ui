#!/usr/bin/env python3
"""CopyClip - Show UI command for system hotkey integration."""

import sys
from pathlib import Path

# Add project root to path so copyclip can be imported
sys.path.insert(0, str(Path(__file__).parent.parent))

from PyQt6.QtWidgets import QApplication

from copyclip.core.clipboard import ClipboardManager
from copyclip.core.history import HistoryManager
from copyclip.core.settings import SettingsManager
from copyclip.ui.main_window import MainWindow
from copyclip.utils.single_instance import SingleInstance


def main():
    """Show the CopyClip UI."""
    single_instance = SingleInstance()
    if single_instance.is_running():
        single_instance.signal_show_window()
        sys.exit(0)

    if not single_instance.acquire_lock():
        sys.exit(1)

    app = QApplication(sys.argv)

    clipboard_manager = ClipboardManager()
    history_manager = HistoryManager(clipboard_manager)
    settings_manager = SettingsManager()

    main_window = MainWindow(history_manager, settings_manager)
    main_window.show_clipboard()

    sys.exit(app.exec())


if __name__ == "__main__":
    main()
